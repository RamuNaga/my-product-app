<mat-horizontal-stepper linear #stepper>
  <!-- Step 1: Company -->
  <mat-step [stepControl]="companyGroup()!">
    <ng-template matStepLabel>Company</ng-template>
    <ng-content select="[step1]"></ng-content>

    <div class="flex justify-between mt-4">
      <span></span>
      <button
        mat-raised-button
        color="primary"
        (click)="goNext()"
        [disabled]="!companyGroup()?.valid"
      >
        Next
      </button>
    </div>
  </mat-step>

  <!-- Step 2: Location -->
  <mat-step [stepControl]="locationGroup()!">
    <ng-template matStepLabel>Location</ng-template>
    <ng-content select="[step2]"></ng-content>

    <div class="flex justify-between mt-4">
      <button mat-button (click)="goBack()">Back</button>
      <button
        mat-raised-button
        color="primary"
        (click)="goNext()"
        [disabled]="!locationGroup()?.valid"
      >
        Next
      </button>
    </div>
  </mat-step>

  <!-- Step 3: User -->
  <mat-step [stepControl]="userGroup()!">
    <ng-template matStepLabel>User</ng-template>
    <ng-content select="[step3]"></ng-content>

    <div class="flex justify-between mt-4">
      <button mat-button (click)="goBack()">Back</button>
      <button
        mat-raised-button
        color="primary"
        (click)="goNext()"
        [disabled]="!userGroup()?.valid"
      >
        Next
      </button>
    </div>
  </mat-step>

  <!-- Step 4: Confirmation -->
  <mat-step>
    <ng-template matStepLabel>Confirm & Submit</ng-template>

    <p class="text-sm text-gray-600">
      Please review your information before submitting.
    </p>

    <!-- Example Summary -->
    <pre class="bg-gray-100 p-4 rounded mt-4 text-sm">
          Company: {{ companyGroup()?.value | json }}
          Location: {{ locationGroup()?.value | json }}
          User: {{ userGroup()?.value | json }}
    </pre>

    <div class="flex justify-between mt-6">
      <button mat-button (click)="goBack()">Back</button>
      <button
        mat-raised-button
        color="accent"
        type="button"
        (click)="onSubmit()"
        [disabled]="!isFormValid()"
      >
        Submit
      </button>
    </div>
  </mat-step>
</mat-horizontal-stepper>
