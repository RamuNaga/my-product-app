<!-- Loader shown while loading -->
@if (productStore.isLoading()) {
<div class="loader-container">
  <lib-ui-material-loader></lib-ui-material-loader>
</div>
}
<div class="form-container">
  <mat-card class="form-card">
    <form
      [formGroup]="productForm"
      class="product-form"
      (ngSubmit)="onSubmit()"
    >
      <div class="form-field">
        <lib-input-field
          [control]="productcodeControl"
          label="Product Code"
          placeholder="Enter product code"
          [required]="true"
          type="text"
        ></lib-input-field>
      </div>

      <div class="form-field">
        <lib-input-field
          [control]="nameControl"
          label="Product Name"
          placeholder="Enter product name"
          [required]="true"
          type="text"
        ></lib-input-field>
      </div>

      <div class="form-field">
        <lib-input-field
          [control]="descriptionControl"
          label="Description"
          placeholder="Enter description"
          [required]="false"
          type="text"
        ></lib-input-field>
      </div>

      <div class="form-field">
        <lib-input-field
          [control]="weightControl"
          label="Product Weight"
          placeholder="Enter Weight"
          [required]="false"
          type="text"
        ></lib-input-field>
      </div>

      <div class="form-field">
        <lib-input-field
          [control]="priceControl"
          label="Product price"
          placeholder="Enter price"
          [required]="false"
          type="number"
        ></lib-input-field>
      </div>

      <div class="form-field">
        <lib-ui-product-image-upload
          [uploadUrl]="productImageUploadUrl()"
          [formData]="productForm.value"
          [resetTrigger]="productStore.resetTrigger()"
          (fileSelected)="onFileSelected($event)"
        ></lib-ui-product-image-upload>
      </div>

      <div class="form-actions">
        <button
          mat-raised-button
          color="primary"
          type="submit"
          [disabled]="
            productForm.invalid ||
            !productStore.selectedFile() ||
            productStore.isLoading()
          "
        >
          Save
        </button>
      </div>
    </form>
  </mat-card>
</div>
