@if (productStore.isLoading()) {
<div class="loader-container">
  <lib-ui-material-loader></lib-ui-material-loader>
</div>
}

<div class="form-container">
  <mat-card class="form-card">
    <mat-card-header>
      <mat-card-title>{{ titleLabel }}</mat-card-title>
    </mat-card-header>

    <form
      [formGroup]="productForm"
      class="product-form"
      (ngSubmit)="onSubmit()"
    >
      <!-- Horizontal Fields Row -->

      <div class="form-field full-width">
        <lib-input-field
          formControlName="name"
          label="Product Name"
          placeholder="Enter product name"
          [required]="true"
        ></lib-input-field>
      </div>
      <div class="form-row">
        <div class="form-field">
          <lib-input-field
            formControlName="productCode"
            label="Product Code"
            placeholder="Enter product code"
            [required]="true"
          ></lib-input-field>
        </div>

        <div class="form-field">
          <lib-input-field
            formControlName="productWeight"
            label="Product Weight"
            placeholder="Enter weight"
          ></lib-input-field>
        </div>

        <div class="form-field">
          <lib-input-field
            formControlName="price"
            label="Product Price"
            placeholder="Enter price"
            type="number"
            [required]="true"
          ></lib-input-field>
        </div>
      </div>

      <!-- Description Field -->
      <div class="form-field full-width">
        <lib-input-field
          formControlName="description"
          label="Description"
          placeholder="Enter description"
        ></lib-input-field>
      </div>

      <!-- Product Image Upload -->
      <div class="form-field full-width">
        <lib-ui-product-image-upload
          [uploadUrl]="productImageUploadUrl()"
          [formData]="productForm.value"
          [resetTrigger]="productStore.resetTrigger()"
          (fileSelected)="onFileSelected($event)"
        ></lib-ui-product-image-upload>
      </div>

      <!-- Actions -->
      <div class="form-actions">
        <button
          mat-raised-button
          color="primary"
          type="submit"
          [disabled]="
            productForm.invalid ||
            !productStore.selectedFile() ||
            productStore.isLoading()
          "
        >
          Save
        </button>
      </div>
    </form>
  </mat-card>
</div>
