<div class="filters sticky" [formGroup]="filterForm">
  <lib-input-field
    label="Workorder Code"
    placeholder="Enter workorder code"
    formControlName="workorderCodeControl"
    (keyup)="onFilterChange()"
  ></lib-input-field>

  <lib-select-field
    label="Client Location"
    formControlName="clientLocationControl"
    [options]="greencoreLocations()"
    (selectionChange)="onFilterChange()"
  ></lib-select-field>

  <lib-select-field
    label="Status"
    formControlName="statusControl"
    [options]="statusOptions"
    (selectionChange)="onFilterChange()"
  ></lib-select-field>

  <div class="filter-buttons">
    <button mat-raised-button color="primary" (click)="loadWorkorders()">
      Search
    </button>
    <button mat-stroked-button color="accent" (click)="exportToCSV()">
      Export CSV
    </button>
  </div>
</div>

<ng-container>
  <div *ngIf="isLoading(); else gridTemplate" class="loader">
    <lib-ui-material-loader></lib-ui-material-loader>
  </div>

  <ng-template #gridTemplate>
    <lib-data-grid
      #dataGrid
      [dataSourceData]="rowData()"
      [displayedColumns]="displayedColumns"
      [showApprove]="true"
      (editClicked)="onEdit($event)"
      (deleteClicked)="onDelete($event)"
      (approveClicked)="onApprove($event)"
    ></lib-data-grid>
  </ng-template>
</ng-container>
